!function(e,n){"object"==typeof exports&&"undefined"!=typeof module?n(exports,require("node:os"),require("node:child_process"),require("node:fs"),require("node:path")):"function"==typeof define&&define.amd?define(["exports","node:os","node:child_process","node:fs","node:path"],n):n((e="undefined"!=typeof globalThis?globalThis:e||self).nodeVgmstreamWrapper={},e.os,e.node_child_process,e.fs,e.path)}(this,(function(e,n,t,r,s){"use strict";const i={linux:"src/vgmstream-win/vgmstream-cli",mac:"src/vgmstream-win/vgmstream-cli",wasm:"src/vgmstream-win/vgmstream-cli.wasm",win:"src/vgmstream-win/vgmstream-cli.exe",win64:"src/vgmstream-win64/vgmstream-cli.exe",linux:"src/vgmstream-win/vgmstream-cli",darwin:"src/vgmstream-win/vgmstream-cli",win32:"src/vgmstream-win64/vgmstream-cli.exe"};e.decode=async function(e){r.existsSync("./tmp")&&r.rmSync("./tmp",{recursive:!0}),r.mkdirSync("./tmp",{recursive:!0});const o=i[n.platform()];return await function(...e){return new Promise((function(n,r){let s="",i="";const o=t.spawn(e.shift(),e);o.stdout.on("data",(function(e){s+=e.toString()})),o.stderr.on("data",(function(e){i+=e.toString()})),o.on("error",(function(e){r(e)})),o.on("exit",(function(e,t){n({stdout:s,stderr:i})}))}))}(o,"-S","0","-o","./tmp/?n.wav",e),r.readdirSync("./tmp").map((e=>({filename:e,buffer:r.readFileSync(s.join("./tmp",e))})))}}));
