"use strict";var r=require("node:os"),e=require("node:child_process"),t=require("node:fs"),n=require("node:path");const i={linux:"src/vgmstream-win/vgmstream-cli",mac:"src/vgmstream-win/vgmstream-cli",wasm:"src/vgmstream-win/vgmstream-cli.wasm",win:"src/vgmstream-win/vgmstream-cli.exe",win64:"src/vgmstream-win64/vgmstream-cli.exe",linux:"src/vgmstream-win/vgmstream-cli",darwin:"src/vgmstream-win/vgmstream-cli",win32:"src/vgmstream-win64/vgmstream-cli.exe"};exports.extract=async function(s){t.existsSync("./tmp")&&t.rmSync("./tmp",{recursive:!0}),t.mkdirSync("./tmp",{recursive:!0});const m=i[r.platform()];return await function(...r){return new Promise((function(t,n){let i="",s="";const m=e.spawn(r.shift(),r);m.stdout.on("data",(function(r){i+=r.toString()})),m.stderr.on("data",(function(r){s+=r.toString()})),m.on("error",(function(r){n(r)})),m.on("exit",(function(r,e){t({stdout:i,stderr:s})}))}))}(m,"-S","0","-o","./tmp/?n.wav",s),t.readdirSync("./tmp").map((r=>({filename:r,buffer:t.readFileSync(n.join("./tmp",r))})))};
